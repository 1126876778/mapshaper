<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<link rel="stylesheet" href="testing/qunit.css" type="text/css"/>
<script type="text/javascript" src="testing/testing.js"></script>
<script type="text/javascript" src="testing/qunit.js"></script>

<script type="text/javascript" src="trace.js"></script>
<script type="text/javascript" src="core.js"></script>
<script type="text/javascript" src="events.js"></script>
<script type="text/javascript" src="loading.js"></script>
<script type="text/javascript" src="data.js"></script>
<script type="text/javascript" src="election2010.js"></script>



<script type="text/javascript">


var houseData = new HouseDataSource( "testing/test_data/house_test_bundle.txt" );

var districtData = new DataTable;
districtData.load( new TabDataLoader( "testing/test_data/house_districts.txt" ) );

var w = new Waiter;
w.waitFor( houseData );
w.waitFor( districtData );
w.startWaiting();
w.addEventListener( C.READY, handleLoaded );


function handleLoaded( evt ) {
	test("Data loading", testDataLoading );

}


function testDataLoading() {
	equals( houseData.isReady(), true, 'HouseDataSource is ready');

	//trace( 

	houseData.importDistrictData( districtData );
	equals( houseData.districtData.fieldExists( 'district' ), true, "Index field 'district' exists?" );
	equals( houseData.districtData.fieldExists( 'dem_votes' ), true, "Index field 'dem_votes' exists?" );
}


</script>
</head>
<body>
<h1 id="qunit-header">QUnit example</h1>
<h2 id="qunit-banner"></h2>
<h2 id="qunit-userAgent"></h2>
<ol id="qunit-tests">
</ol>

</body>
</html>